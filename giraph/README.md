## Neo4j with TeraHeap

### Preparation

1. Set the JAVA_HOME in the ./config.sh 

2. Edit ./graphalytics-platforms-giraph/graphalytics-1.2.0-giraph-0.2-SNAPSHOT/config/benchmark.properties

```sh
# Root directory containing graphs on local filesystem
graphs.root-directory =

# Directory to cache derived datasets in (optional, defaults to ${graphs.root-directory}/cache)
#graphs.cache-directory =

# Directory to the validation datasets on local filesystem
graphs.validation-directory =

# Directory to the output datasets generated by the system.
graphs.output-directory =

# Maximum memory used by the benchmark runner (by default 3x that of benchmark executor)
# e.g. 128g, 512m
benchmark.runner.max-memory = 10g
```

### Build Giraph and benchmark suite
```sh
./build -a
```
### Build only benchmark suite
```sh
./build -b
```

3. Export in your .bashrc the following variables
```sh
#### Hadoop
export HADOOP_HOME=/<path tot tera_applications>/tera_applications/giraph/hadoop-2.4.0
export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native
export HADOOP_OPTS="-Djava.library.path=$HADOOP_HOME/lib -Djava.library.path=$HADOOP_HOME/lib/native"
export HADOOP_OPTS="-Djava.library.path=$LD_LIBRARY_PATH"
export HADOOP_PREFIX=/<path tot tera_applications>/tera_applications/giraph/hadoop-2.4.0
export PATH=$HADOOP_PREFIX/bin:$PATH
export PATH=$HADOOP_PREFIX/sbin:$PATH
export HADOOP_MAPRED_HOME=${HADOOP_PREFIX}
export HADOOP_COMMON_HOME=${HADOOP_PREFIX}
export HADOOP_HDFS_HOME=${HADOOP_PREFIX}
export YARN_HOME=${HADOOP_PREFIX}
export JAVA_HOME=/<path to teraheap repo>/teraheap/jdk8u345/build/linux-x86_64-normal-server-release/jdk
```

### Run Benchmarks
To run the benchmarks please read the README file in ./scripts
directory
